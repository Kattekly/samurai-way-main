"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[563],{563:function(t,r,n){n.r(r),n.d(r,{default:function(){return z}});var e=n(8683),s=n(5671),i=n(3144),o=n(136),u=n(5716),a=n(2791),l=n(885),c="ProfileInfo_descriptionBlock__tPzpV",d="ProfileInfo_mainPhoto__E-rUq",h="ProfileInfo_contact__X7t9C",f=n(4374),p=n(4353),m=n(184),x=function(t){var r=(0,a.useState)(!1),n=(0,l.Z)(r,2),e=n[0],s=n[1],i=(0,a.useState)(t.status),o=(0,l.Z)(i,2),u=o[0],c=o[1];(0,a.useEffect)((function(){c(t.status)}),[t.status]);return(0,m.jsxs)("div",{children:[!e&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Status"}),": ",(0,m.jsx)("span",{onDoubleClick:function(){s(!0)},children:t.status||"no status"})]}),e&&(0,m.jsx)("div",{children:(0,m.jsx)("input",{autoFocus:!0,onBlur:function(){s(!1),t.updateStatusThunk(u)},onChange:function(t){c(t.currentTarget.value)},value:u})})]})},j=n(1275),v=n(704),b={formSummaryError:"ProfileDataForm_formSummaryError__7iCAu"},g=(0,v.Z)({form:"edit-profile"})((function(t){var r=t.handleSubmit,n=t.profile,e=t.error;return(0,m.jsxs)("form",{onSubmit:r,children:[(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"save"})}),e&&(0,m.jsx)("div",{className:b.formSummaryError,children:e}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Full name"}),": ",(0,j.Gr)("Full name","fullName",[],j.II)]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job"}),": ",(0,j.Gr)("","lookingForAJob",[],j.II,{type:"checkbox"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professional skills"}),":",(0,j.Gr)("My professional skills","lookingForAJobDescription",[],j.gx)]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"About me"}),":",(0,j.Gr)("About me","aboutMe",[],j.gx)]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Contacts"}),": ",Object.keys(n.contacts).map((function(t){return(0,m.jsx)("div",{className:b.contact,children:(0,m.jsxs)("b",{children:[t,": ",(0,j.Gr)(t,"contacts."+t,[],j.II)]})},t)}))]})]})})),k=function(t){var r=t.profile,n=t.isOwner,e=t.toEditMode;return(0,m.jsxs)(m.Fragment,{children:[n&&(0,m.jsx)("div",{children:(0,m.jsx)("button",{onClick:e,children:"edit"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Full name"}),": ",r.fullName]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Looking for a job"}),": ",r.lookingForAJob?"yes":"no"]}),r.lookingForAJob&&(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"My professionals skills"}),": ",r.lookingForAJobDescription]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"About me"}),": ",r.aboutMe]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("b",{children:"Contacts"}),": ",Object.keys(r.contacts).map((function(t){return(0,m.jsx)(P,{contactTitle:t,contactValue:r.contacts[t]},t)}))]})]})},P=function(t){var r=t.contactTitle,n=t.contactValue;return(0,m.jsxs)("div",{className:h,children:[(0,m.jsx)("b",{children:r}),": ",n]})},y=function(t){var r=t.profile,n=t.status,e=t.updateStatusThunk,s=t.isOwner,i=t.savePhoto,o=t.saveProfile,u=(0,a.useState)(!1),h=(0,l.Z)(u,2),j=h[0],v=h[1];if(!r)return(0,m.jsx)(f.Z,{});return(0,m.jsx)("div",{children:(0,m.jsxs)("div",{className:c,children:[(0,m.jsx)("img",{src:r.photos.large||p,className:d}),s&&(0,m.jsx)("input",{type:"file",onChange:function(t){t.target.files&&i(t.target.files[0])}}),j?(0,m.jsx)(g,{onSubmit:function(t){o(t).then((function(){v(!1)}))},profile:r,initialValues:r}):(0,m.jsx)(k,{profile:r,isOwner:s,toEditMode:function(){v(!0)}}),(0,m.jsx)(x,{status:n,updateStatusThunk:e})]})})},Z=n(2457),_="MyPosts_postsBlock__P8WQf",S="MyPosts_posts__CCgrz",I="Post_item__nI8sT",C=function(t){return(0,m.jsxs)("div",{className:I,children:[t.message,(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{children:"Like"}),t.like]})]})},T=n(6139),w=n(5298),A=a.memo((function(t){var r=t.posts.map((function(t){return(0,m.jsx)(C,{message:t.message,like:t.like},t.id)})).reverse();return(0,m.jsxs)("div",{className:_,children:["My Posts",(0,m.jsx)(N,{onSubmit:function(r){t.addPost&&t.addPost(r.newPostText)}}),(0,m.jsx)("div",{className:S,children:r})]})})),F=(0,w.D)(10),N=(0,v.Z)({form:"ProfileAddNewPostForm"})((function(t){var r=t.handleSubmit;return(0,m.jsxs)("form",{onSubmit:r,children:[(0,m.jsx)("div",{children:(0,m.jsx)(T.Z,{component:j.gx,name:"newPostText",validate:[w.C,F],placeholder:"Post message"})}),(0,m.jsx)("div",{children:(0,m.jsx)("button",{children:"Add post"})})]})})),M=A,E=n(364),D=(0,E.$j)((function(t){return{newPostText:t.messagePage.newPostText,posts:t.messagePage.posts}}),(function(t){return{addPost:function(r){t((0,Z.Wl)(r))}}}))(M),O=function(t){return(0,m.jsxs)("div",{children:[(0,m.jsx)(y,{profile:t.profile,saveProfile:t.saveProfile,status:t.status,updateStatusThunk:t.updateStatusThunk,isOwner:t.isOwner,savePhoto:t.savePhoto}),(0,m.jsx)(D,{})]})},G=n(9271),J=n(549),U=n(7781),V=function(t){(0,o.Z)(n,t);var r=(0,u.Z)(n);function n(){return(0,s.Z)(this,n),r.apply(this,arguments)}return(0,i.Z)(n,[{key:"refreshProfile",value:function(){var t=+this.props.match.params.userId;t||(t=this.props.authorizedUserId)||this.props.history.push("/login"),t?(this.props.getProfileThunk(t),this.props.getStatusThunk(t)):console.error("ID should exists in URI params or in state ('authorizedUserId')")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,r,n){this.props.match.params.userId!=t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,m.jsx)("div",{children:(0,m.jsx)(O,(0,e.Z)((0,e.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatusThunk:this.props.updateStatusThunk,savePhoto:this.props.savePhoto}))})}}]),n}(a.Component),z=((0,J.Z)(V),(0,U.qC)((0,E.$j)((function(t){return{profile:t.messagePage.profile,status:t.messagePage.status,authorizedUserId:t.auth.id,isAuth:t.auth.isAuth}}),{getProfileThunk:Z.VB,getStatusThunk:Z.$b,updateStatusThunk:Z.dw,savePhoto:Z.Ju,saveProfile:Z.Ii}),G.EN,J.Z)(V))},1275:function(t,r,n){n.d(r,{gx:function(){return h},II:function(){return f},Gr:function(){return p}});var e=n(8683),s=n(5987),i=(n(2791),n(6139)),o=n(8811),u=n(184),a=["input","meta","children"],l=["input","meta","children"],c=["input","meta","children"],d=function(t){t.input;var r=t.meta,n=r.touched,e=r.error,i=t.children,l=((0,s.Z)(t,a),n&&e);return(0,u.jsxs)("div",{className:o.Z.formControl+" "+(l?o.Z.error:""),children:[(0,u.jsx)("div",{children:i}),l&&(0,u.jsx)("span",{children:e})]})},h=function(t){var r=t.input,n=(t.meta,t.children,(0,s.Z)(t,l));return(0,u.jsxs)(d,(0,e.Z)((0,e.Z)({},t),{},{children:[" ",(0,u.jsx)("textarea",(0,e.Z)((0,e.Z)({},r),n))]}))},f=function(t){var r=t.input,n=(t.meta,t.children,(0,s.Z)(t,c));return(0,u.jsx)(d,(0,e.Z)((0,e.Z)({},t),{},{children:(0,u.jsx)("input",(0,e.Z)((0,e.Z)({},r),n))}))};function p(t,r,n,s){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return(0,u.jsxs)("div",{children:[(0,u.jsx)(i.Z,(0,e.Z)({placeholder:t,name:r,validate:n,component:s},o))," ",a]})}},549:function(t,r,n){var e=n(8683),s=n(5987),i=(n(2791),n(9271)),o=n(364),u=n(184),a=["isAuth"],l=function(t){return{isAuth:t.auth.isAuth}};r.Z=function(t){return(0,o.$j)(l)((function(r){var n=r.isAuth,o=(0,s.Z)(r,a);return n?(0,u.jsx)(t,(0,e.Z)({},o)):(0,u.jsx)(i.l_,{to:"/login"})}))}},5298:function(t,r,n){n.d(r,{C:function(){return e},D:function(){return s}});var e=function(t){if(!t)return"Field is required!"},s=function(t){return function(r){if(r&&r.length>t)return"Max length is ".concat(t," symbols")}}},8811:function(t,r){r.Z={formControl:"FormsControls_formControl__mwFpC",error:"FormsControls_error__TXWsV",formSummaryError:"FormsControls_formSummaryError__avrPo"}},4353:function(t,r,n){t.exports=n.p+"static/media/user.1c10e1cb7cf8191fbbc8.png"},885:function(t,r,n){n.d(r,{Z:function(){return s}});var e=n(181);function s(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,s,i=[],o=!0,u=!1;try{for(n=n.call(t);!(o=(e=n.next()).done)&&(i.push(e.value),!r||i.length!==r);o=!0);}catch(a){u=!0,s=a}finally{try{o||null==n.return||n.return()}finally{if(u)throw s}}return i}}(t,r)||(0,e.Z)(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=563.00a986e3.chunk.js.map